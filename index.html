<!DOCTYPE html>
<html>
<head>
    <title>Society Data Entry</title>
</head>
<body>

<h2>House-wise Member Entry</h2>

<label>House / Flat No:</label><br>
<input type="text" id="house" required><br><br>

<form id="memberForm">
    <div id="members">
        <div class="member">
            <label>Name:</label>
            <input type="text" class="name" required>

            <label>Age:</label>
            <input type="number" class="age" required>

            <label>Gender:</label>
            <select class="gender">
                <option>Male</option>
                <option>Female</option>
                <option>Other</option>
            </select>

            <label>Relation:</label>
            <input type="text" class="relation">

            <label>Mobile:</label>
            <input type="text" class="mobile">
            <hr>
        </div>
    </div>

    <button type="button" onclick="addMember()">Add Another Member</button><br><br>
    <button type="submit">Save All Members</button>
</form>

<hr>

<h3>Saved Members</h3>

<table border="1" cellpadding="5">
    <thead>
        <tr>
            <th>House</th>
            <th>Name</th>
            <th>Age</th>
            <th>Gender</th>
            <th>Relation</th>
            <th>Mobile</th>
        </tr>
    </thead>
    <tbody id="tableBody"></tbody>
</table>

<script>
let data = JSON.parse(localStorage.getItem("societyData")) || [];

function addMember() {
    const div = document.createElement("div");
    div.className = "member";
    div.innerHTML = `
        <label>Name:</label>
        <input type="text" class="name" required>

        <label>Age:</label>
        <input type="number" class="age" required>

        <label>Gender:</label>
        <select class="gender">
            <option>Male</option>
            <option>Female</option>
            <option>Other</option>
        </select>

        <label>Relation:</label>
        <input type="text" class="relation">

        <label>Mobile:</label>
        <input type="text" class="mobile">
        <hr>
    `;
    document.getElementById("members").appendChild(div);
}

document.getElementById("memberForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const house = document.getElementById("house").value;
    if (!house) {
        alert("Enter house number");
        return;
    }

    const members = document.querySelectorAll(".member");

    members.forEach(m => {
        data.push({
            house: house,
            name: m.querySelector(".name").value,
            age: m.querySelector(".age").value,
            gender: m.querySelector(".gender").value,
            relation: m.querySelector(".relation").value,
            mobile: m.querySelector(".mobile").value
        });
    });

    localStorage.setItem("societyData", JSON.stringify(data));
    showData();
    this.reset();
    document.getElementById("members").innerHTML = document.querySelector(".member").outerHTML;
});

function showData() {
    const table = document.getElementById("tableBody");
    table.innerHTML = "";

    data.forEach(d => {
        table.innerHTML += `
            <tr>
                <td>${d.house}</td>
                <td>${d.name}</td>
                <td>${d.age}</td>
                <td>${d.gender}</td>
                <td>${d.relation}</td>
                <td>${d.mobile}</td>
            </tr>
        `;
    });
}

showData();
</script>

</body>
</html>
